if (self.CavalryLogger) { CavalryLogger.start_js(["K4QWg"]); }

__d("XNotesComposerOnlyPublishController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notes/composer/onlypublish/",{note_id:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d("NotesReader.react",["ix","cx","fbt","glyph","ActorURI","CampfireByline.react","CssBackgroundImage.react","DOMContainer.react","Image.react","React","TooltipData","UnicodeBidi","UnicodeBidiDirection","Video.react","XNotesComposerOnlyPublishController","XUIButton.react","XUIGrayText.react","XUIOverlayButton.react","XUIText.react","canEditNote","uniqueID"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("UnicodeBidiDirection").LTR,m=b("UnicodeBidiDirection").RTL;c=b("React").PropTypes;var n=b("canEditNote")();d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.state={waitingToEdit:!1},this.$1=function(){this.props.onEdit&&this.setState({waitingToEdit:!0},this.props.onEdit)}.bind(this),b}a.prototype.render=function(){"use strict";__p&&__p();var a=null;if(this.props.coverMediaInfo)if(this.props.coverMediaInfo.type==="photo"){var c=this.props.coverMediaInfo,d=c.xOffset;c=c.yOffset;a=b("React").createElement(b("CssBackgroundImage.react"),{imageURI:this.props.coverMediaInfo.coverPhotoURI,className:"_2jzn",backgroundPosition:d+"% "+c+"%"})}else this.props.coverMediaInfo.type==="video"&&(a=b("React").createElement(b("Video.react"),{poster:this.props.coverMediaInfo.posterSrc,src:this.props.coverMediaInfo.videoSrc,width:"100%",height:"100%"}));d=null;if(this.props.ufiMarkup)d=b("React").createElement(b("DOMContainer.react"),null,this.props.ufiMarkup);else if(this.props.canEdit){c=b("XNotesComposerOnlyPublishController").getURIBuilder().setInt("note_id",this.props.noteID).getURI();c=b("ActorURI").create(c,this.props.ownerID);var e=i._("Click the \"Publish\" button to publish. Editing is not available in this browser."),f=null;n&&(e=i._("Click the \"Publish\" button to save or \"Edit\" to make more changes."),f=b("React").createElement(b("XUIButton.react"),{label:i._("Edit"),onClick:this.$1,disabled:this.state.waitingToEdit,size:"xlarge",use:"default",className:"_3-9b _1nvw"}));d=b("React").createElement("div",{className:"_4lmh"},b("React").createElement(b("XUIGrayText.react"),{shade:"medium",display:"block"},i._("This is a preview of your note.")),b("React").createElement(b("XUIGrayText.react"),{shade:"light",display:"block",className:"_3-8w"},e),b("React").createElement("div",{className:"_3-8y"},b("React").createElement(b("XUIButton.react"),{href:c.toString(),rel:"async-post",label:i._("Publish"),size:"xlarge",use:"confirm",className:"_1nvw"}),f))}e=null;this.props.canEdit?n?e=b("React").createElement("div",{className:"_34gr"},b("React").createElement(b("XUIOverlayButton.react"),{image:b("React").createElement(b("Image.react"),{src:g("101440")}),label:this.props.isDoc?i._("Edit Doc"):i._("Edit Note"),onClick:this.$1,disabled:this.state.waitingToEdit})):e=b("React").createElement("div",{className:"_34gr"},b("React").createElement(b("XUIOverlayButton.react"),{image:b("React").createElement(b("Image.react"),{src:g("101440")}),label:i._("Editing is not available in this browser"),disabled:!0})):this.props.isDoc&&(e=b("React").createElement("div",{className:"_34gr"},b("React").createElement(b("XUIOverlayButton.react"),babelHelpers["extends"]({image:b("React").createElement(b("Image.react"),{src:g("101440")}),label:i._("Edit Doc"),disabled:!0},b("TooltipData").propsFor(i._("This document is not editable"),"left")))));c="_4lmi _t04"+(this.props.coverMediaInfo?"":" _t05");f=b("UnicodeBidi").getDirection(this.props.title);f="_4lmk"+(f===l?" _2vxa":"")+(f===m?" _2vxb":"")+" autofocus";var h=b("uniqueID")(),j=null;if(this.props.menuMarkup){var k=this.props.canEdit||this.props.isDoc;k="_16q8"+(this.props.coverMediaInfo?"":" _16q9")+(k?" _16qa":"");j=b("React").createElement("div",{className:k},b("React").createElement(b("DOMContainer.react"),null,this.props.menuMarkup))}return b("React").createElement("div",{className:c,"data-ft":this.props.feedTracking,role:"dialog","aria-labelledby":h},a,b("React").createElement("div",{className:"_39k2"},j,b("React").createElement(b("XUIText.react"),{id:h,tabIndex:-1,type:"serif",display:"block",className:f},this.props.title),b("React").createElement(b("CampfireByline.react"),{authorName:this.props.authorInfo.name,authorProfileURI:this.props.authorInfo.profileURI,authorProfilePicURI:this.props.authorInfo.profilePicURI,dateString:this.props.authorInfo.dateString,permalinkURI:this.props.permalinkURI,privacyMarkup:this.props.privacyMarkup,viewCount:this.props.viewCount})),b("React").createElement(b("XUIText.react"),{type:"serif",display:"block",className:"_39k5"},this.props.children),b("React").createElement("div",{className:"_4lmp"},d),e)};a.propTypes={authorInfo:c.object.isRequired,canEdit:c.bool,coverMediaInfo:c.object,feedTracking:c.string,noteID:c.string.isRequired,permalinkURI:c.string.isRequired,privacyMarkup:c.object,onEdit:c.func,ownerID:c.string.isRequired,title:c.string.isRequired,ufiMarkup:c.object,viewCount:c.object,isDoc:c.bool};e.exports=a}),null);
__d("XGroupDocEditorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/docedit/",{doc_id:{type:"Int"},group_id:{type:"Int"}})}),null);
__d("XNotesPermalinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notes/{?author}/{?slug}/{note_id}/",{note_id:{type:"Int",required:!0},author:{type:"String"},slug:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},_ft_:{type:"String"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("GroupDocsReaderOverlay",["AsyncRequest","DOM","DOMContainer.react","LayerDestroyOnHide","LayerHideOnEscape","LayerHideOnTransition","NotesReader.react","PageTransitions","React","ReactDOM","TypewriterLayer","URI","XGroupDocEditorController","XNotesPermalinkController","goURI"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f){"use strict";this.$1=a,this.$2=c,d&&!Array.isArray(d)?this.$3=d:this.$3=f,this.$4=b("DOM").create("div"),this.$5=null,this.$6=null,this.$7=new(b("TypewriterLayer"))({addedBehaviors:[b("LayerDestroyOnHide"),b("LayerHideOnEscape"),b("LayerHideOnTransition")]},this.$4),this.$8=this.$7.subscribe("hide",this.$9.bind(this)),this.$10(),this.$11(),this.$7.show()}a.prototype.$9=function(){"use strict";__p&&__p();b("PageTransitions").removeHandler(this.$12);this.$12=null;var a=function(c){var d=this.$5;this.$5=null;b("PageTransitions").removeHandler(a);if(d.getPath()===c.getPath()){b("PageTransitions").transitionComplete(!0);return!0}return!1}.bind(this);b("PageTransitions").registerHandler(a);b("goURI")(this.$5)};a.prototype.$13=function(){"use strict";var a=b("XGroupDocEditorController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setData({doc_id:this.$1,group_id:this.$2}).setMethod("POST").setHandler(function(){this.$7.hide()}.bind(this)).send()};a.prototype.$10=function(){"use strict";b("ReactDOM").render(b("React").createElement(b("NotesReader.react"),{authorInfo:this.$3.authorInfo,ownerID:this.$3.authorInfo.ownerID,canEdit:this.$3.canEdit,coverMediaInfo:this.$3.coverMediaInfo,isDoc:!0,noteID:this.$1,title:this.$3.title,menuMarkup:this.$3.menuMarkup,onEdit:this.$13.bind(this),permalinkURI:this.$3.permalinkURI,ufiMarkup:this.$3.ufiMarkup},b("React").createElement(b("DOMContainer.react"),{display:"block"},this.$3.documentMarkup)),this.$4)};a.prototype.$11=function(){"use strict";__p&&__p();var a=new(b("URI"))(this.$3.permalinkURI);this.$6=function(c){__p&&__p();if(a.getPath()===c.getPath()){b("PageTransitions").transitionComplete(!0);return!0}if(this.$7.isShown()&&this.$5.getPath()===c.getPath()){b("PageTransitions").removeHandler(this.$6);this.$6=null;this.$5=null;this.$8.unsubscribe();b("PageTransitions").transitionComplete(!0);return!0}this.$6=null;return!1}.bind(this);b("PageTransitions").registerHandler(this.$6);this.$5=b("URI").getRequestURI();b("goURI")(a)};e.exports=a}),null);