if (self.CavalryLogger) { CavalryLogger.start_js(["rM3BM"]); }

__d("VideoPlayerHTML5Subtitles",["cx","csx","CSS","DOM","DOMQuery","SubtitlesStyle"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,b){"use strict";this.$3="",this.$6=a,this.$7=b}a.prototype.loadSubtitles=function(){"use strict";var a=b("DOMQuery").scry(this.$6.parentNode,"._30vn");a.length?(this.$1=a[0],this.$2=b("DOMQuery").find(this.$1,"._30vo")):(this.$1=b("DOM").create("div",{className:"_30vn hidden_elem"}),this.$2=b("DOM").create("span",{className:"_30vo hidden_elem"}),b("DOM").setContent(this.$1,this.$2),b("DOM").insertAfter(this.$6,this.$1));this.setDimensions();this.$7.setSubtitleUpdatedHandler(this.setSubtitle.bind(this))};a.prototype.setSubtitlesStyle=function(a,c,d,e){"use strict";this.$5?(this.$5.setBackgroundColor(a),this.$5.setBackgroundOpacity(c),this.$5.setTextColor(d),this.$5.setTextSize(e),this.$5.updateStyle()):this.$5=new(b("SubtitlesStyle"))(a,c,this.$2,this.$1,d,e)};a.prototype.$8=function(a){"use strict";this.$1&&b("DOM").setAttributes(this.$1,{style:"bottom:"+a+"px;"})};a.prototype.$9=function(){"use strict";this.$4&&(this.$4.release(),this.$4.removeAllListeners(),delete this.$4)};a.prototype.registerDrawer=function(a){"use strict";this.$9(),this.$4=a,this.$4.addListener("reposition",this.$8.bind(this))};a.prototype.setDimensions=function(){"use strict";var a=this.$6.getBoundingClientRect().width;this.$1&&(a<350?(b("CSS").removeClass(this.$1,"_30vp"),b("CSS").addClass(this.$1,"_30vq")):a<800?(b("CSS").removeClass(this.$1,"_30vp"),b("CSS").removeClass(this.$1,"_30vq")):(b("CSS").removeClass(this.$1,"_30vq"),b("CSS").addClass(this.$1,"_30vp")))};a.prototype.setSubtitle=function(a){"use strict";a=a.join("\n");if(a===this.$3)return;b("DOM").setContent(this.$2,a);a?(b("CSS").removeClass(this.$2,"hidden_elem"),this.$4&&this.$4.setHeight(this.$1.offsetHeight)):(b("CSS").addClass(this.$2,"hidden_elem"),this.$4&&this.$4.setHeight(0));this.$3=a};a.prototype.setOnSubtitlesReady=function(a){"use strict";this.$7.setSubtitleReadyHandler(a)};a.prototype.removeSubtitles=function(){"use strict";b("DOM").setContent(this.$6,null),b("DOM").remove(this.$1),this.$9(),this.$7.remove()};a.prototype.showSubtitles=function(){"use strict";this.$1&&b("CSS").removeClass(this.$1,"hidden_elem"),this.$4&&(this.$4.reposition(),this.$4.reserve())};a.prototype.hideSubtitles=function(){"use strict";this.$1&&b("CSS").addClass(this.$1,"hidden_elem"),this.$4&&this.$4.release()};e.exports=a}),null);
__d("VideoPlayerWebVttSubtitleStream",["BlobFactory","DOM","Event","SubRipText","XHRRequest","getCrossOriginTransport","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("Event").EventHandlerRef;var g=a.URL||a.webkitURL;function c(a,c){this.$2=b("emptyFunction"),this.$3={},this.$4=b("emptyFunction"),this.$5={},this.$6=[],this.$12=function(){var a=this.$1.textTracks[0].activeCues;a&&a.length&&a[0].text?this.$2([a[0].text]):this.$2([])}.bind(this),this.$1=a,this.$7(c)}c.prototype.setSubtitleUpdatedHandler=function(a){this.$2=a;return this};c.prototype.setSubtitleReadyHandler=function(a){this.$4=a;return this};c.prototype.remove=function(){this.$6.forEach(function(a){return a.remove()}),this.$6=[]};c.prototype.$7=function(a){if(a in this.$3){this.$8(this.$3[a]);return}if(!g||!b("BlobFactory").isSupported())return;new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(b){this.$3[a]=this.$9(b),this.$8(this.$3[a])}.bind(this)).send()};c.prototype.$10=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="hidden"})};c.prototype.$8=function(a){var c=b("DOM").create("track",{kind:"captions",src:a});b("Event").listen(c,"load",function(){this.$4()}.bind(this));b("DOM").appendContent(this.$1,c);this.$10();this.$6.push(b("Event").listen(this.$1,"timeupdate",function(){this.$13(a)}.bind(this)))};c.prototype.$11=function(a){return a.oncuechange!==undefined};c.prototype.$9=function(a){a=new(b("SubRipText"))(a);var c=b("BlobFactory").getBlob([a.renderVTT()],{type:"text/vtt"});c=g.createObjectURL(c);this.$5[c]=a;return c};c.prototype.$13=function(a){var b=this.$1.currentTime;this.$2(this.$5[a].getSubtitles(b))};e.exports=c}),null);