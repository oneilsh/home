if (self.CavalryLogger) { CavalryLogger.start_js(["coWis"]); }

__d("ChannelConnection",["Arbiter","ChannelConstants","ChannelManager","JSLogger","Run","SystemEvents","Visibility","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=b("JSLogger").create("channel_connection"),h=null,i=null,j=null,k=null,l=0;b("ChannelManager").startChannelManager();var m=Object.assign(new(b("Arbiter"))(),{CONNECTED:"chat-connection/connected",RECONNECTING:"chat-connection/reconnecting",SHUTDOWN:"chat-connection/shutdown",MUTE_WARNING:"chat-connection/mute",UNMUTE_WARNING:"chat-connection/unmute"});b("Run").onBeforeUnload(function(){});function n(){i&&(b("clearTimeout")(i),i=null)}function o(){n(),g.log("unmute_warning"),m.inform(m.UNMUTE_WARNING)}function p(a){n(),i=b("setTimeoutAcrossTransitions")(o,a),g.log("mute_warning",{time:a}),m.inform(m.MUTE_WARNING)}function q(){j&&(b("clearTimeout")(j),j=null)}function r(a,c){__p&&__p();q();if(a===b("ChannelConstants").ON_ENTER_STATE&&(c.nextState||c.state)==="pull"){if(k!==m.CONNECTED){g.log("connected");var d=!k;k=m.CONNECTED;l=0;m.inform(m.CONNECTED,{init:d})}}else a===b("ChannelConstants").ON_ENTER_STATE&&((c.nextState||c.state)==="ping"||!c.nextState&&c.state==="idle")?j=b("setTimeoutAcrossTransitions")(function(){var b=null;c.state==="idle"&&!c.nextState||(b=c.delay||0);g.log("reconnecting",{delay:b});m.disconnected()&&g.log("reconnecting_ui",{delay:b});k=m.RECONNECTING;c.state==="idle"&&l++;l>1?m.inform(m.RECONNECTING,b):!c.nextState&&c.state==="idle"&&r(a,c)},500):a===b("ChannelConstants").ON_SHUTDOWN&&(g.log("shutdown",{reason:c.reason}),k=m.SHUTDOWN,l=0,m.inform(m.SHUTDOWN,c.reason))}function s(){b("ChannelManager").isShutdown()?r(b("ChannelConstants").ON_SHUTDOWN,b("ChannelManager")._shutdownHint):r(b("ChannelConstants").ON_ENTER_STATE,{state:b("ChannelManager").state,nextState:b("ChannelManager").nextState,delay:0}),b("Visibility").addListener(b("Visibility").VISIBLE,m.reconnect)}b("Run").onAfterLoad(s);Object.assign(m,{disconnected:function(){return k===m.SHUTDOWN||k===m.RECONNECTING&&!i&&l>1},isShutdown:function(){return k===m.SHUTDOWN},reconnect:function(a){if(b("ChannelManager").state==="ping"||b("ChannelManager").state==="pull"||b("ChannelManager").isShutdown())return;g.log("reconnect",{now:a});m.inform(m.RECONNECTING,0);a?(h!==null&&(b("clearTimeout")(h),h=null),b("ChannelManager").enterState("ping!")):h||(h=b("setTimeoutAcrossTransitions")(function(){b("ChannelManager").enterState("ping!"),h=null},b("ChannelConstants").CHANNEL_MANUAL_RECONNECT_DEFER_MSEC));b("ChannelManager").resetDelay()},unmuteWarning:o});function t(){b("Arbiter").subscribe([b("ChannelConstants").ON_ENTER_STATE,b("ChannelConstants").ON_SHUTDOWN],r),b("Arbiter").subscribe(b("ChannelConstants").ATTEMPT_RECONNECT,function(){m.disconnected()&&m.reconnect()}),b("SystemEvents").subscribe(b("SystemEvents").TIME_TRAVEL,function(){m.reconnect(),p(b("ChannelConstants").MUTE_WARNING_TIME_MSEC)}),b("Run").onBeforeUnload(q,!1)}b("Run").onAfterLoad(t);m.mockAfterLoad=function(){s(),t()};b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.channel_connected=!m.disconnected()});e.exports=m}),3);
__d("ChatUnreadCount",["ChatConfig","ChatDispatcher","ChatUnreadCountActionTypes","MercuryIDs","MercurySingletonProvider","MercuryThreadInformer","MercuryThreads","MercuryUnreadState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$2=b("MercuryThreadInformer").getForFBID(a),this.$3=b("MercuryThreads").getForFBID(a),this.$4=new Map(),this.$5=b("MercuryUnreadState").getForFBID(a),this.setupSubscriptions()}a.prototype.getUnreadCountForUID=function(a){__p&&__p();if(!a)return null;var c=b("MercuryIDs").getThreadIDFromUserID(a);if(!this.$5.getIsThreadUnread(c)&&!b("ChatConfig").get("unread_count_fix")){this.$4["delete"](a);return 0}c=this.$3.getOrFetch(c);c=c&&c.unread_count;!c&&b("ChatConfig").get("unread_count_fix")?this.$4["delete"](a):this.$4.set(a,c);return c};a.prototype.setupSubscriptions=function(){__p&&__p();this.$2.subscribe("threads-updated",function(a,c){a=Object.keys(c).some(function(a){a=b("MercuryIDs").getUserIDFromThreadID(a);if(!a)return!1;var c=this.getUnreadCountForUID(a);a=this.$4.get(a)||0;return c!==a}.bind(this));a&&b("ChatDispatcher").dispatch({type:b("ChatUnreadCountActionTypes").COUNT_UPDATED})}.bind(this)),this.$2.subscribe("unread-updated",function(){return b("ChatDispatcher").dispatch({type:b("ChatUnreadCountActionTypes").COUNT_UPDATED})})};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("XPymkFunnelLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pymk/funnel_logging/",{event_ts:{type:"Int",required:!0},query_id:{type:"Int"},candidate_id:{type:"Int"},signature:{type:"Int"},loc:{type:"String",required:!0},ref:{type:"String"},action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("PymkFunnelLogger",["AsyncRequest","DOMQuery","XPymkFunnelLoggingController"],(function(a,b,c,d,e,f){__p&&__p();a={setupListeners:function(a,b,c,d,e){this._setupForSingleElement(a,b,c,"add"),this._setupForSingleElement(a,b,d,"click"),this._setupForSingleElement(a,b,e,"click")},logImpression:function(a,b,c){this._logEvent(a,"impression",b,c)},logXOut:function(a,b,c){this._logEvent(a,"hide",b,c)},_logEvent:function(a,event,c,d){a=b("XPymkFunnelLoggingController").getURIBuilder().setInt("candidate_id",a).setInt("signature",c).setInt("event_ts",Math.floor(Date.now()/1e3)).setEnum("action",event).setString("loc",d).getURI();new(b("AsyncRequest"))(a).setMethod("POST").send()},_setupForSingleElement:function(a,c,d,e){Event.listen(d,"click",function(event){var d=a.getAttribute("data-signature"),f=b("DOMQuery").find(a,"input.friendBrowserID");f=parseInt(f.value,10);this._logEvent(f,e,d,c)}.bind(this))}};e.exports=a}),null);
__d("XFriendRequestIHEventLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/requests/interaction_history_logging/",{target_id:{type:"FBID",required:!0},log_event:{type:"String",required:!0}})}),null);
__d("FriendRequestIHEventLogger",["Event","AsyncRequest","XFriendRequestIHEventLoggingController"],(function(a,b,c,d,e,f){__p&&__p();a={setupJewelListeners:function(a,b,c){this._setupForJewelSingleElement(a,b,"click"),c&&this._setupForJewelSingleElement(a,c,"click")},logImpression:function(a){this._logEvent(a,"impression")},_logEvent:function(a,event){if(isNaN(a))return;a=b("XFriendRequestIHEventLoggingController").getURIBuilder().setFBID("target_id",a).setString("log_event",event).getURI();new(b("AsyncRequest"))(a).setMethod("POST").send()},_setupForJewelSingleElement:function(a,c,d){b("Event").listen(c,"click",function(event){var b=a.getAttribute("id");if(!b)return;b=b.substring(0,b.length-6);this._logEvent(b,d)}.bind(this))}};e.exports=a}),null);
__d("QPEventHandling",[],(function(a,b,c,d,e,f){"use strict";a={registerClickListener:function(a,b,c){a.addEventListener("click",c)}};e.exports=a}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/qp/action/log/",{qp_id:{type:"Int",required:!0},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}})}),null);
__d("QPRenderer",["csx","CSS","FBLogger","Parent","QPEventHandling","XAsyncRequest","XQuickPromotionSimpleLoggingController","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,event,c){a=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setString("qp_event",event).setStringToStringMap("qp_instance_log_data",c).getURI();new(b("XAsyncRequest"))(a).send()}function a(a,c,d){a=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setEnum("qp_action",c).setStringToStringMap("qp_instance_log_data",d).getURI();new(b("XAsyncRequest"))(a).send()}function c(a,c,d,e,f,g){e=b("ge")(e);e!==null?i(a,d,e,g,function(){f&&b("CSS").hide(c)}):b("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,d)}function d(a,c,d,e,f){i(a,c,d,f,function(){if(e){var a=b("Parent").bySelector(d,"._5jmm");a instanceof HTMLElement&&b("CSS").hide(a)}})}function e(a,c,d){c.show();h(a,"view",{});c.subscribe("cancel",function(){h(a,"dialog_cancel",{})});for(var e=0;e<d.length;e++){var f=d[e],g=b("ge")(f.element_id);g!==null?(i(a,f.action,g,f.extra_log_data,f.should_close?function(){c.hide()}:function(){}),f.action=="primary"&&g.focus()):b("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,f.action)}}function i(a,c,d,e,f){b("QPEventHandling").registerClickListener(d,c,function(){var d=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setEnum("qp_action",c).setStringToStringMap("qp_instance_log_data",e).getURI();new(b("XAsyncRequest"))(d).send();f()})}f.setAction=c;f.setComponentActionForFeedUnitQP=d;f.setDialogActionsAndShow=e;f.logAction=a;f.logEvent=h}),null);
__d("JewelQPLogging",["QPRenderer"],(function(a,b,c,d,e,f){var g=!1,h=null,i=!1;function j(){if(i)return;g&&h&&(i=!0,b("QPRenderer").logEvent(String(h.promotion_id),"view",h.instance_log_data?h.instance_log_data:{}))}a={onJewelOpened:function(){g=!0,j()},updateQPLogData:function(a){h=a,j()}};e.exports=a}),null);
__d("RequestsJewelStore",["Arbiter","ArbiterMixin","ChannelConstants"],(function(a,b,c,d,e,f){__p&&__p();a=babelHelpers["extends"]({},b("ArbiterMixin"),{_initialized:!1,_count:0,_requestList:{},addFriendRequests:function(a){Object.assign(this._requestList,a)},getRequestListKeys:function(){return Object.keys(this._requestList)},removeRequest:function(a){delete this._requestList[a]},getRequestCount:function(a){return this.getRequestListKeys().length},decrementCount:function(){this.setCount(Math.max(0,this._count-1))},setCount:function(a){b("Arbiter").inform("jewel/count-updated",{jewel:"requests",count:a},b("Arbiter").BEHAVIOR_STATE)},setupListeners:function(){__p&&__p();if(this._initialized)return;this._initialized=!0;b("Arbiter").subscribe("jewel/count-updated",function(a,b){b.jewel==="requests"&&this._updateCount(b.count)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_add"),function(a,b){return this._addRequest(b)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_friending_notifs"),function(a,b){return this._addNotification(b)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_remove_old"),function(a,b){return this._removeOldRequest(b)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("friend_requests_seen"),function(a,b){return this.setCount(0)}.bind(this))},_updateCount:function(a){var b=this._count!==a;this._count=a;b&&this.inform("countUpdated",a)},_addRequest:function(a){__p&&__p();if(!a)return;a=a.obj;var b=a.from;a=a.suggester;b=this._requestList[b];b||this.setCount(this._count+1);b=b?b.type:null;a=b===19&&!a;this.inform("addRequest",{shouldReplace:a,previousType:b})},_addNotification:function(a){if(!a||a.obj.notif_type!=="friend_confirmed")return;this.inform("addNotification")},_removeOldRequest:function(a){if(!a)return;a=this._requestList[a.obj.from];if(!a)return;this.inform("removeOldRequest",a)}});e.exports=a}),null);
__d("XGigaboxxUpdateSeenTimeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/gigaboxx/endpoint/writesafe/update_last_seen_time/",{})}),null);
__d("RequestsJewelController",["invariant","Promise","Arbiter","AsyncRequest","AsyncSignal","CSS","DOM","DOMQuery","Event","EventProfiler","FriendRequestIHEventLogger","JewelQPLogging","MarauderLogger","Parent","PymkFunnelLogger","RequestsJewelStore","ScrollableArea","TimeSlice","XUIBadge","XGigaboxxUpdateSeenTimeAsyncController","ge","getElementPosition","getViewportDimensions","promiseDone","requireWeak","throttle"],(function(a,b,c,d,e,f,g){__p&&__p();var h=null;b("requireWeak")("FriendBrowserCheckboxController",function(a){return h=a});var i=31,j=600,k=30,l=160;m.getInstance=function(){"use strict";return this.$13};m.updateFromDOM=function(){"use strict";var a=this.getInstance();a&&a.fromDom()};m.setupScroll=function(){"use strict";var a=this.getInstance();a&&a.setupScroll()};m.setInitialHeight=function(){"use strict";var a=this.getInstance();a&&a.updateHeight()};m.maybeLoadJewel=function(){"use strict";var a=this.getInstance();a&&a.maybeLoadJewel()};m.setTitleBadgeCount=function(a){"use strict";this.$12&&this.$12.setCount(a)};m.initTitleBadge=function(a,c){"use strict";this.$12||b("Arbiter").subscribe(["FriendRequest/delete","FriendRequest/confirm","FriendSuggestion/accepting","FriendSuggestion/ignoring"],function(a,b){return this.decrementTitleBadgeCount(b)}.bind(this)),this.$12=c};m.decrementTitleBadgeCount=function(a){"use strict";this.$12&&this.$12.setCount(this.$12.getCount()-1)};m.isOpen=function(){"use strict";var a=this.getInstance();return a?a.$3():!1};m.create=function(a,b,c){"use strict";this.$13&&g(0);return this.$13=new m(a,b,c)};m.setupJewelRefresh=function(){"use strict";b("Arbiter").subscribe(["FriendRequest/confirmFromProfile","FriendRequest/deleteFromProfile"],function(a,c){a={};a.reloadcontent=!0;new(b("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(a).setAllowCrossPageTransition(!0).send()})};function m(a,c,d){"use strict";this.$3=c,this.$2=d,this.$1=a,this.$5=-1,this.$6=-1,this.$11=b("Promise").resolve(!0),this.$9=b("throttle").acrossTransitionsWithBlocking(function(){return this.$14({log_impressions:!0})}.bind(this),5e3),b("RequestsJewelStore").subscribe("addRequest",this.$15.bind(this)),b("RequestsJewelStore").subscribe("addNotification",function(){return this.$16()}.bind(this)),b("RequestsJewelStore").subscribe("removeOldRequest",this.$17.bind(this)),b("RequestsJewelStore").setupListeners(),this.setupScroll(),this.$18(),this.$19(),this.$20()}m.prototype.fromDom=function(){"use strict";__p&&__p();var a={};b("DOMQuery").scry(this.$1,"li.objectListItem").forEach(function(b){b=b.getAttribute("id");if(b){b=this.$21(b);b&&b.requester&&(a[b.requester]=b)}}.bind(this));b("RequestsJewelStore").addFriendRequests(a);this.$22()};m.prototype.maybeLoadJewel=function(){"use strict";this.$10&&(this.$10(function(){this.openHandler()}.bind(this)),this.$10=null)};m.prototype.updateHeight=function(){"use strict";var a=this.$23();a&&(a.style.height=this.$24()+"px")};m.prototype.markSeen=function(){"use strict";b("promiseDone")(this.$11,function(){b("DOMQuery").scry(this.$1,"li[id]")[0],new(b("AsyncRequest"))(b("XGigaboxxUpdateSeenTimeAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({folder:this.$2}).send()}.bind(this))};m.prototype.openHandler=function(){"use strict";__p&&__p();!this.$7&&this.$3()&&(this.$7=!0,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstRequestsJewelOpen"));b("Arbiter").inform("requestsJewel/opened");var a=b("ge")("fbRequestsJewelLoading"),c=this.$23();if(!a&&!c)this.$10=b("TimeSlice").getGuardedContinuation("RequestsJewelController clickBeforeE2E continuation");else if(a)this.$9();else{a=b("RequestsJewelStore").getRequestListKeys();a.length>0&&new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI("/friends/requests/log_impressions").setData({ids:a.join(","),ref:"jewel"}).send()}c&&b("ScrollableArea").poke(c);b("JewelQPLogging").onJewelOpened()};m.prototype.closeHandler=function(){"use strict";b("Arbiter").inform("requestsJewel/closed"),b("DOMQuery").scry(this.$1,"li.jewelItemNew").forEach(function(a){b("CSS").removeClass(a,"jewelItemNew")})};m.prototype.setupScroll=function(){"use strict";var a=this.$23();a&&(this.$8=this.$25(),this.$4=0,b("ScrollableArea").getInstance(a).subscribe("scroll",this.$26.bind(this)),this.$27(),this.$28())};m.prototype.$18=function(){"use strict";b("Event").listen(this.$1,"submit",function(a){a=b("Parent").byClass(a.getTarget(),"objectListItem");a&&(b("CSS").removeClass(a,"jewelItemNew"),b("CSS").addClass(a,"jewelItemResponded"))})};m.prototype.$19=function(){"use strict";b("Event").listen(window,"resize",b("throttle").acrossTransitions(function(){this.updateHeight()}.bind(this)))};m.prototype.$20=function(){"use strict";b("Arbiter").subscribe("pymk-x-out",function(a,b){a=b.location;(a==="pymk_jewel_first_page"||a==="pymk_jewel")&&this.$27()}.bind(this))};m.prototype.$29=function(a){"use strict";a=parseInt(a,10);return isNaN(a)?null:a};m.prototype.$21=function(a){"use strict";a=a.match(/^(\d+)_(\d+)/);return!a?null:{requester:this.$29(a[1]),type:this.$29(a[2])}};m.prototype.$30=function(a,b){"use strict";return a==null||b==null?null:a+"_"+b};m.prototype.$23=function(){"use strict";return b("DOMQuery").scry(this.$1,".uiScrollableArea")[0]};m.prototype.$25=function(){"use strict";return b("DOMQuery").scry(this.$1,".uiScrollableAreaWrap")[0]};m.prototype.$26=function(){"use strict";__p&&__p();var a=b("DOMQuery").scry(this.$8,".uiMorePager").pop();if(a){var c=b("getElementPosition")(a).y,d=this.$23();c>0&&d&&b("CSS").addClass(d,"contentAfter");c=b("DOMQuery").find(a,"a");if(!c)return;d=b("getElementPosition")(c).y;if(d===this.$4)return;a=b("getElementPosition")(this.$8);a=a.y+a.height;if(d-300<a&&d>0){this.$4=d;a=c.getAttribute("ajaxify");a?new(b("AsyncRequest"))(a).setRelativeTo(c).setStatusElement(b("Parent").byClass(c,"stat_elem")).send():h&&h.getInstance("jewel").showMore()}}this.$27();this.$28()};m.prototype.$27=function(){"use strict";__p&&__p();if(!this.$8)return;var a=b("getElementPosition")(this.$8);a=a.y+a.height;var c=b("DOMQuery").scry(this.$1,"li.friendBrowserListUnit"),d=c.length-1;while(d>this.$5){var e=b("getElementPosition")(c[d]),f=e.y;e=f+e.height;if(f>0&&e<=a)break;d-=1}f=d;while(d>this.$5){e=b("DOMQuery").find(c[d],"input.friendBrowserID");a=parseInt(e.value,10);e=parseInt(c[d].getAttribute("data-signature"),10);b("PymkFunnelLogger").logImpression(a,e,"pymk_jewel");d--}this.$5=Math.max(this.$5,f)};m.prototype.$28=function(){"use strict";__p&&__p();if(!this.$8)return;var a=b("getElementPosition")(this.$8);a=a.y+a.height;var c=b("DOMQuery").scry(this.$1,"li.objectListItem"),d=c.length-1;while(d>this.$6){var e=b("getElementPosition")(c[d]),f=e.y;e=f+e.height;if(f>0&&e<=a)break;d-=1}f=d;while(d>this.$6){e=c[d].getAttribute("id");e=e.substring(0,e.length-6);b("MarauderLogger").log("request_seen","friend_request_waterfall",{request_id:e,request_location:"requests_jewel"});b("FriendRequestIHEventLogger").logImpression(e);d-=1}this.$6=Math.max(this.$6,f)};m.prototype.$14=function(){var a=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.$11=new(b("Promise"))(function(c,d){var e=!b("ge")("fbRequestsJewelLoading");new(b("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(babelHelpers["extends"]({},a,{reloadcontent:e})).setFinallyHandler(function(a){!a.getError()?c(!0):d()}).send()})};m.prototype.$16=function(){"use strict";if(this.$3())return;this.$14()};m.prototype.$15=function(a,b){a=b.shouldReplace;b=b.previousType;if(!a&&(b||this.$3()))return;this.$14()};m.prototype.$17=function(a,c){a=c.requester;c=c.type;if(this.$3()||b("ge")("fbRequestsJewelLoading")!=null)return;c=this.$30(a,c);c=c&&b("ge")(c);c&&(b("CSS").hasClass(c,"jewelItemNew")&&b("RequestsJewelStore").decrementCount(),b("CSS").hasClass(c,"jewelItemResponded")||(b("DOM").remove(c),b("RequestsJewelStore").removeRequest(a),this.$22()))};m.prototype.$22=function(){"use strict";b("DOMQuery").scry(this.$1,"li.empty").forEach(function(a){b("CSS").conditionShow(a,b("RequestsJewelStore").getRequestCount()<=0)})};m.prototype.$24=function(){"use strict";return Math.min(Math.max(b("getViewportDimensions")().height-l,k),j)+i};m.$13=null;e.exports=m}),null);
__d("RTCWebUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCallType=function(a){this.$1.call_type=a;return this};a.prototype.setClientTime=function(a){this.$1.client_time=a;return this};a.prototype.setComponent=function(a){this.$1.component=a;return this};a.prototype.setConferenceState=function(a){this.$1.conference_state=a;return this};a.prototype.setErrorDomain=function(a){this.$1.error_domain=a;return this};a.prototype.setErrorType=function(a){this.$1.error_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setMediaType=function(a){this.$1.media_type=a;return this};a.prototype.setPage=function(a){this.$1.page=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={call_type:!0,client_time:!0,component:!0,conference_state:!0,error_domain:!0,error_type:!0,event:!0,media_type:!0,page:!0,surface:!0,vc:!0};e.exports=a}),null);
__d("DeviceBasedLoginWWWQP",["CSS","Event","tidyEvent"],(function(a,b,c,d,e,f){"use strict";a={swapWithShadowMessageOnClick:function(a,c,d){b("tidyEvent")(b("Event").listen(a,"click",function(a){b("CSS").hide(c),b("CSS").show(d)}))}};e.exports=a}),null);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirrorRecursive")({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});e.exports=a}),null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.$MNCommerceDialogStateStore1=null,this.$MNCommerceDialogStateStore2=null}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type;switch(c){case b("MNCommerceActionTypes").DIALOG.SHOW:this.$MNCommerceDialogStateStore1=a.dialogContainer;this.$MNCommerceDialogStateStore2=a.state;this.__emitChange();break;case b("MNCommerceActionTypes").DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break}};a.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1};a.prototype.getState=function(){return this.$MNCommerceDialogStateStore2};a.__moduleID=e.id;e.exports=new a()}),null);
__d("FluxMixinLegacyInstrumentation",["FluxContainerInstrumentation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.constructor.displayName||a.constructor.name||"FluxMixinLegacy(unknown)"}var h={_callCalculateState:function(){var a=b("FluxContainerInstrumentation").onCalculateStateStart(g(this)),c=this._FluxMixinLegacyInstrumentationCalculateStateCaller.apply(this,arguments);a&&a();return c},UNSAFE_componentWillMount:function(){this.constructor._FluxMixinLegacyInstrumentationOnInitCalled||(b("FluxContainerInstrumentation").onInit(this.constructor),this.constructor._FluxMixinLegacyInstrumentationOnInitCalled=!0)},_FluxMixinLegacyInstrumentationEmittedChangeStores:null,_onInitialStateForInstrumentation:function(){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.initialState(g(this))},_onReceivePropsForInstrumentation:function(){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.receiveProps(g(this))},_addStoreEmitForInstrumentation:function(a){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.shouldRecord()&&(this._FluxMixinLegacyInstrumentationEmittedChangeStores=this._FluxMixinLegacyInstrumentationEmittedChangeStores||[],b("FluxContainerInstrumentation").addStoreDependencies(this._FluxMixinLegacyInstrumentationEmittedChangeStores,a))},_collectStoreEmitsForInstrumentation:function(){var a=this._FluxMixinLegacyInstrumentationEmittedChangeStores;this._FluxMixinLegacyInstrumentationEmittedChangeStores=null;return a},_logStoreEmitsForInstrumentation:function(a){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.storeEmitChange(g(this),a||[])},componentDidUpdate:function(a,c){var d=b("FluxContainerInstrumentation").getDidUpdateCallback();d&&d({name:g(this),props:{prev:a,cur:this.props},state:{prev:c,cur:this.state}})}};function a(a){b("FluxContainerInstrumentation").hasInstrumentation()&&(a.mixins=a.mixins||[],a.mixins.push(h),a._FluxMixinLegacyInstrumentationCalculateStateCaller=a._callCalculateState,delete a._callCalculateState);return a}e.exports={addInstrumentation:a}}),null);
__d("PureStoreBasedStateMixin",["invariant","FluxMixinLegacyInstrumentation","StoreBasedStateMixinHelper","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];return b("FluxMixinLegacyInstrumentation").addInstrumentation({_callCalculateState:function(){return this.constructor.calculateState()},getInitialState:function(){this._onInitialStateForInstrumentation&&this._onInitialStateForInstrumentation();return this._callCalculateState()},UNSAFE_componentWillMount:function(){__p&&__p();this.constructor.calculateState||g(0);this._recalculateStateID=null;var a=function(){var a=this;this.isMounted()&&(function(){var b=a._collectStoreEmitsForInstrumentation?a._collectStoreEmitsForInstrumentation():null,c=a._callCalculateState();a.setState(a._logStoreEmitsForInstrumentation!=null?function(){b!=null&&this._logStoreEmitsForInstrumentation&&this._logStoreEmitsForInstrumentation(b);return c}.bind(a):c)})();this._recalculateStateID=null}.bind(this);this._mixin=new(b("StoreBasedStateMixinHelper"))(c);this._mixin.subscribeCallback(function(){this._recalculateStateID===null&&(this._recalculateStateID=b("setImmediate")(a))}.bind(this),this._addStoreEmitForInstrumentation)},componentWillUnmount:function(){this._mixin.release(),this._mixin=null}})}.bind(this);e.exports=a}),null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"MNCommerceDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("MNCommerceDialogStateStore"))],statics:{calculateState:function(){var a=b("MNCommerceDialogStateStore").getDialogContainer();return{dialogContainer:a}}},render:function(){var a=this.state.dialogContainer;return!a?null:b("React").createElement(a,null)}});e.exports=a}),null);
__d("RTCCallActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL:"CALL",CALL_SUCCESS:"CALL_SUCCESS",CALL_ERROR:"CALL_ERROR",INCOMING_CALL_SUCCESS:"INCOMING_CALL_SUCCESS",INIT:"INIT",RESET:"RESET",WAIT_FOR_USER_INPUT:"WAIT_FOR_USER_INPUT",SET_CALL_SUMMARY:"SET_CALL_SUMMARY",SET_MW_CALL_TYPE:"SET_MW_CALL_TYPE",SET_LAYOUT:"SET_LAYOUT",SET_DOMINANT_SPEAKER:"SET_DOMINANT_SPEAKER",SET_PINNED_SPEAKER:"SET_PINNED_SPEAKER",SET_USE_DOMINANT_SPEAKE_VIEW:"SET_USE_DOMINANT_SPEAKE_VIEW",SET_GRID_VIEW:"SET_GRID_VIEW",SET_STRIP_VIEW:"SET_STRIP_VIEW",INIT_THREAD:"INIT_THREAD",ON_PARTICIPANT_LEFT:"ON_PARTICIPANT_LEFT",ON_PARTICIPANTS_ADDED:"ON_PARTICIPANTS_ADDED",ADD_PARTICIPANTS_TO_RING:"ADD_PARTICIPANTS_TO_RING",JOIN:"JOIN",JOIN_SUCCESS:"JOIN_SUCCESS",JOIN_ERROR:"JOIN_ERROR",HANGUP:"HANGUP",HANGUP_SUCCESS:"HANGUP_SUCCESS",HANGUP_ERROR:"HANGUP_ERROR",ON_CONFERENCE_STATE:"ON_CONFERENCE_STATE",DISMISS:"DISMISS",END_CALL:"END_CALL",ON_JOIN_REQUEST_SENT:"ON_JOIN_REQUEST_SENT",ON_JOIN_RESPONSE:"ON_JOIN_RESPONSE",ON_SERVER_MEDIA_UPDATE_SUCCESS:"ON_SERVER_MEDIA_UPDATE_SUCCESS",ON_CLIENT_MEDIA_UPDATE_RESPONSE:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",INIT_LOCAL_USER:"INIT_LOCAL_USER",INIT_REMOTE_USERS:"INIT_REMOTE_USERS",ADD_REMOTE_STREAM:"ADD_REMOTE_STREAM",REMOVE_REMOTE_STREAM:"REMOVE_REMOTE_STREAM",REMOVE_ALL_REMOTE_STREAMS:"REMOVE_ALL_REMOTE_STREAMS",SET_PREFERRED_REMOTE_STREAM:"SET_PREFERRED_REMOTE_STREAM",ADD_REMOTE_TRACK:"ADD_REMOTE_TRACK",REMOVE_REMOTE_TRACK:"REMOVE_REMOTE_TRACK",AUDIO_MUTED:"AUDIO_MUTED",AUDIO_UNMUTED:"AUDIO_UNMUTED",VIDEO_MUTED:"VIDEO_MUTED",VIDEO_UNMUTED:"VIDEO_UNMUTED",REMOTE_VIDEO_MUTED:"REMOTE_VIDEO_MUTED",REMOTE_VIDEO_UNMUTED:"REMOTE_VIDEO_UNMUTED",SELF_VIEW_COLLAPSED:"SELF_VIEW_COLLAPSED",SELF_VIEW_UNCOLLAPSED:"SELF_VIEW_UNCOLLAPSED",ADD_LOCAL_STREAM:"ADD_LOCAL_STREAM",REMOVE_LOCAL_STREAM:"REMOVE_LOCAL_STREAM",REPLACE_LOCAL_STREAM:"REPLACE_LOCAL_STREAM",REMOVE_ALL_LOCAL_STREAMS:"REMOVE_ALL_LOCAL_STREAMS",SET_PREFERRED_LOCAL_STREAM:"SET_PREFERRED_LOCAL_STREAM",ADD_LOCAL_SCREEN_STREAM:"ADD_LOCAL_SCREEN_STREAM",REMOVE_LOCAL_SCREEN_STREAM:"REMOVE_LOCAL_SCREEN_STREAM",REMOVE_ALL_LOCAL_SCREEN_STREAMS:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",REPLACE_LOCAL_SCREEN_STREAM:"REPLACE_LOCAL_SCREEN_STREAM",ADD_REMOTE_SCREEN_STREAM:"ADD_REMOTE_SCREEN_STREAM",REMOVE_REMOTE_SCREEN_STREAM:"REMOVE_REMOTE_SCREEN_STREAM",TOGGLE_REMOTE_STREAM:"TOGGLE_REMOTE_STREAM",SUBMIT_RATING:"SUBMIT_RATING",SUBMIT_FEEDBACK:"SUBMIT_FEEDBACK",RATING_SHOWN:"RATING_SHOWN",FEEDBACK_SHOWN:"FEEDBACK_SHOWN",SET_CONFERENCE_STATE:"SET_CONFERENCE_STATE",SET_END_CALL_REASON:"SET_END_CALL_REASON",FLOOR_STATUS:"FLOOR_STATUS"})}),null);
__d("RTCP2PCallActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P_DISMISS_NUX:"P2P_DISMISS_NUX",P2P_INIT_NUX_STATE:"P2P_INIT_NUX_STATE",P2P_MARK_NUX_VIEWED:"P2P_MARK_NUX_VIEWED",P2P_PROCESS_MESSAGE:"P2P_PROCESS_MESSAGE",P2P_SET_IS_CALLER:"P2P_SET_IS_CALLER",P2P_STAR_RATING_DONE:"P2P_STAR_RATING_DONE",POP_IN_SCREEN_CONTENT:"POP_IN_SCREEN_CONTENT",POP_OUT_SCREEN_CONTENT:"POP_OUT_SCREEN_CONTENT",SET_CALL_TYPE:"SET_CALL_TYPE",SET_CONNECTION_STATUS:"SET_CONNECTION_STATUS",SET_MULTIWAY_ESCALATION_SUPPORT:"SET_MULTIWAY_ESCALATION_SUPPORT",SET_REMOTE_SIGNALING_EXPERIMENTS:"SET_REMOTE_SIGNALING_EXPERIMENTS",SET_VIDEO_QUALITY:"SET_VIDEO_QUALITY"})}),null);
__d("RTCP2PCallEscalationActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P_CALL_ESCALATION_ACK:"P2P_CALL_ESCALATION_ACK",P2P_CALL_ESCALATION_FAILURE:"P2P_CALL_ESCALATION_FAILURE",P2P_CALL_ESCALATION_SET_REQUEST:"P2P_CALL_ESCALATION_SET_REQUEST",P2P_CALL_ESCALATION_SET_RESPONSE:"P2P_CALL_ESCALATION_SET_RESPONSE",P2P_CALL_ESCALATION_START:"P2P_CALL_ESCALATION_START",P2P_CALL_ESCALATION_SUCCESS:"P2P_CALL_ESCALATION_SUCCESS"})}),null);
__d("FBRTCSdpUtils",["FBLogger","FBRTCExperiment","UserAgent"],(function(a,b,c,d,e,f){__p&&__p();var g="m=video 0";d=["audio","video"].map(function(a){return new RegExp("m="+a+"\\s+\\d+\\s+(\\w+\\/?)+(\\s+\\d+)+")});var h=d[0],i=d[1],j=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01","http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time","http://www.webrtc.org/experiments/rtp-hdrext/playout-delay","urn:3gpp:video-orientation","urn:ietf:params:rtp-hdrext:ssrc-audio-level","urn:ietf:params:rtp-hdrext:toffset"],k=function(a){return a.match(/^a=rtpmap:(\d+)\s/)[1]},l=function(a,b,c){var d=k(a[b]),e=a[c].split("RTP/SAVPF"),f=e[1].split(/\s+/);d=f.indexOf(d);f.splice(d,1);e[1]=f.join(" ");a[c]=e.join("RTP/SAVPF");a.splice(b,1)},m=function(a,b,c){__p&&__p();var d=k(a[b]);l(a,b,c);var e=new RegExp("^a=(rtcp-fb|fmtp):"+d+" ");a=a.filter(function(a){return!e.test(a)});var f=new RegExp("^a=fmtp:(\\d+)\\s+apt="+d+"($|;)");b=a.reduce(function(a,b,c){c=b.match(f);return c?[].concat(a,[c[1]]):a},[]).join("|");var g=new RegExp("^a=rtpmap:("+b+")\\s+rtx/|^a=fmtp:("+b+")\\s+apt=");return a.filter(function(a){return!g.test(a)})},n={RX_SDP_MEDIA_AUDIO:h,RX_SDP_MEDIA_VIDEO:i,replaceRTPSAVPFProfile:function(a){var b="UDP/TLS/RTP/SAVPF",c="RTP/SAVPF";while(a.indexOf(b)>=0)a=a.replace(b,c);return a},addIceOptionToSdp:function(a,b){"use strict";__p&&__p();var c="a=ice-options:",d=a.indexOf(c);if(d>=0)return a.split("\r\n").map(function(a){return a.startsWith(c)?a+" "+b:a}).join("\r\n");d=c+b;var e=a.split("\r\n"),f=!1,g=-1;for(var h=0;h<e.length;h++){var i=e[h].slice(0,2);if(i=="s="){f=!0;continue}if(f&&i=="a="){g=h;break}}if(g>=0){e.splice(g,0,d);return e.join("\r\n")}return[a,d,"\r\n"].join("")},preferIsac:function(a){__p&&__p();a=a.split("\r\n");var b=-1,c=-1,d=-1;for(var e=0;e<a.length;e++){var f=a[e];f.match(h)&&(b=e);d===-1&&b>-1&&f.match(/^a=rtpmap:/)&&(d=e);f.match(/^a=rtpmap:\d+\s+ISAC\/16000/)&&(c=e)}if(b===-1||c===-1||d===-1||a[b].indexOf("RTP/SAVPF")===-1)return a.join("\r\n");f=a[c];l(a,c,b);a.splice(d,0,f);a[b]=a[b].replace("RTP/SAVPF","RTP/SAVPF "+k(f));return a.join("\r\n")},preferCodec:function(a,b,c){__p&&__p();var d=a.split("\r\n"),e=c?i:h,f=d.findIndex(function(a){return e.test(a)});f!==-1&&d[f].indexOf("RTP/SAVPF")!==-1&&(function(){var a=new RegExp("^a=rtpmap:\\d+\\s+"+b),c=d.findIndex(function(b){return a.test(b)}),e=/^a=rtpmap:/,g=d.findIndex(function(a,b){return b>f&&e.test(a)});if(c!==-1&&g!==-1){var h=d[c];l(d,c,f);d.splice(g,0,h);d[f]=d[f].replace("RTP/SAVPF","RTP/SAVPF "+k(h))}})();return d.join("\r\n")},disableVideo:function(a){var c=/m=video\s+\S+/;a=a.replace(c,g);b("UserAgent").isBrowser("Firefox <= 37")&&(a=this._makeDisabledVideoReceiveOnly(a));return a},_makeDisabledVideoReceiveOnly:function(a){if(a.indexOf(g)>-1){var b=a.split(g);b[1]=b[1].replace(/send(recv|only)/,"recvonly");a=b.join(g)}return a},fixMobileIceSdp:function(a){__p&&__p();a=a.replace(/^a=/,"");a=a.split(/\s+username\s+.+password.+/)[0];var b=a.match(/\s+relay\s+|\s+srflx\s+/),c=a.match(/raddr.+rport.+/);if(b&&!c){b=b[0];c=a.split(b);var d=c[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),e=void 0,f=void 0;d?(e=d[1],f=d[2],c[1]=c[1].replace(d[0],"")):(d=c[0].split(/\s+/),e=d[4],f=d[5]);a=""+c[0]+b+"raddr "+e+" rport "+f+" "+c[1]}return a},addAudioNack:function(a){var b=[];a=a.split("\r\n").map(function(a){var c="";b.length>0&&(/^a=rtpmap:(\d+)/.test(a)||/^a=ssrc/.test(a)||/^m=/.test(a))&&(c+=this._getrtcpFeedbackLinesFromAudioFMTs(b)+"\r\n",b=[]);/^m=audio/.test(a)&&(b=a.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(" "));return c+a}.bind(this)).join("\r\n");b.length>0&&(a+="\r\n"+this._getrtcpFeedbackLinesFromAudioFMTs(b));return a},addSetup:function(a){if(a.indexOf("a=setup:")>=0)return a;a=a.split("\r\n");var b=a.findIndex(function(a){return a.startsWith("s=")}),c=a.findIndex(function(a,c){return c>b&&a.startsWith("a=")});a.splice(c,0,"a=setup:actpass");return a.join("\r\n")},_replaceFmtp:function(a,b,c,d){a=a==b?[]:a.substr(b.length).split(";");var e=a.findIndex(function(a){return a.startsWith(c+"=")});d=c+"="+d;e<0?a.push(d):a[e]=d;return""+b+a.join(";")},_addFmtpToMediaSection:function(a,b,c,d){__p&&__p();var e=new RegExp("^a=rtpmap:(\\d+)\\s"+b);b=a.findIndex(function(a){return a.match(e)});if(b<0)return a;var f=a[b].match(e);f=f[1];var g="a=fmtp:"+f+" ";f=a.findIndex(function(a){return a.startsWith(g)});f===-1&&(f=b+1,a.splice(f,0,g));a[f]=this._replaceFmtp(a[f],g,c,d);return a},addFmtp:function(a,b,c,d){__p&&__p();a=a.split("\r\n");var e=-1;for(var f=0;f<=a.length;f++)if(f===a.length||a[f].startsWith("m=")){if(e!==-1){var g=a.splice(e,f-e);g=this._addFmtpToMediaSection(g,b,c,d);a.splice.apply(a,[e,0].concat(g));f=e+1+g.length}e=f}return a.join("\r\n")},_getrtcpFeedbackLinesFromAudioFMTs:function(a){return a.map(function(a){return"a=rtcp-fb:"+a+" nack"}).join("\r\n")},removeFEC:function(a){a=a.split("\r\n");var b=void 0,c=void 0;for(var d=0;d<a.length;d++)a[d].match(/^a=rtpmap:\d+\s+red\//)&&(b=d),a[d].match(/^m=video/)&&(c=d);b&&c&&l(a,b,c);return a.join("\r\n")},removeH264:function(a){__p&&__p();var b,c=a;a=function(){var a=c.split("\r\n"),b=/^a=rtpmap:\d+\s+H264\//,d=a.findIndex(function(a){return b.test(a)}),e=/^m=video/,f=a.findIndex(function(a){return e.test(a)});if(d==-1||f==-1)return"break";c=m(a,d,f).join("\r\n")};do{var b=a();if(b==="break")break}while(!0);return c},removeVP9:function(a){var b=a.split("\r\n"),c=/^a=rtpmap:\d+\s+VP9\//,d=b.findIndex(function(a){return c.test(a)}),e=/^m=video/,f=b.findIndex(function(a){return e.test(a)});return d!==-1&&f!==-1?m(b,d,f).join("\r\n"):a},removeUnknownRtpHeaderExtensions:function(a){a=a.split("\r\n");a=a.filter(function(a){return!a.match(/^a=extmap:/)||j.some(function(b){return a.includes(b)})});return a.join("\r\n")},isVideoSupported:function(a){return!!a&&(a.indexOf("m=video")!==-1&&a.indexOf(g)===-1||n.getFBFeatures(a).includes("video"))},setDtlsRole:function(a,b){if(!a.match(/setup:(active|passive|actpass)/))return a.replace(/(a=fingerprint:.+)/g,"$1\r\na=setup:"+b);else return a.replace(/setup:actpass/g,"setup:"+b)},setVideoBitrateConstraint:function(a){__p&&__p();var c=!1;if(b("UserAgent").isBrowser("Firefox")){var d=b("FBRTCExperiment").gen("rtc_www_firefox_bitrate_fix");c=d.getBool("enable",!1)}d=c?"TIAS":"AS";c=c?72e4:720;var e=new RegExp("^b="+d+":","m");if(a.match(e))return a;a=a.replace(/^a=mid:video\r\n/m,"a=mid:video\r\nb="+d+":"+c+"\r\n");return a},removeSdparta:function(a){__p&&__p();a=a.split("\r\n");var c="audio",d=!1,e=-1;for(var f=0;f<a.length;f++){var g=a[f];g.indexOf("m=audio")===0&&(c="audio");g.indexOf("m=video")===0&&(d=!0,c="video");g.indexOf("a=mid:sdparta_")===0&&(a[f]="a=mid:"+c);g.indexOf("a=group:BUNDLE sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio video sdparta_")===0&&b("FBLogger")("rtc_www").mustfix("content_name rewriting will not work anymore, fix sdparta_# in Firefox.")}e>-1&&(d?a[e]="a=group:BUNDLE audio video":a[e]="a=group:BUNDLE audio");return a.join("\r\n")},useDTLSOverCrypto:function(a){if(!(b("UserAgent").isBrowser("Chrome >= 57")||b("UserAgent").isBrowser("Opera >= 44")))return a;return!/^a=fingerprint:/m.test(a)?a:a.split("\r\n").filter(function(a){return a.indexOf("a=crypto:")!==0}).join("\r\n")},validateOfferSdp:function(a,b){__p&&__p();if(a.split(":")[0]==="LIVE"){a=function(){var a=/^m=/,c=/^m=audio/,d=/^m=video/,e=/^a=ssrc:/,f=b.split("\r\n"),g=[];for(var h=f.length-1;h>=0;h--)a.test(f[h])&&g.push(f.splice(h));var i=!1,j=!1;g.forEach(function(a){c.test(a[0])&&!i?i=a.some(function(a){return e.test(a)}):d.test(a[0])&&!j&&(j=a.some(function(a){return e.test(a)}))});return{v:i&&j}}();if(typeof a==="object")return a.v}return!0},clearFirefoxInactiveDataChannelBlock:function(a){__p&&__p();if(!b("UserAgent").isBrowser("Firefox"))return a;var c=a.split(p),d=c.findIndex(function(a){return a.startsWith("m=application")});if(d===-1)return a;var e=c.slice(d),f=e.findIndex(function(a,b){return b>0&&a.startsWith("m=")});f!==-1&&(e=e.slice(0,f));if(e[0]!=null&&e[0].endsWith("0")&&e.some(function(a){return a.startsWith("a=inactive")})){f=e.findIndex(function(a){return a.startsWith("c=")});return[].concat(c.slice(0,d+1+(f!==-1?f:0)),c.slice(d+e.length)).join(p)}return a},addFBFeatures:a,getFBFeatures:c},o="a=x-fb-feature:",p="\r\n";function a(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(c.length<1)return a;var e=q(a),f=e[0],g=e[1],h=f.split(p),i=r(h),j=h.filter(function(a){return!a.startsWith(o)}),k=1+j.map(function(a){return a?a.substr(0,2):""}).lastIndexOf("a=")||j.length;return[].concat(j.slice(0),s([].concat(i,c)).map(function(a){return""+o+a}),j.slice(k),[g?[g.trim(),""].join(p):""]).join(p)}function c(a){a=q(a);a=a[0];return r(a.split(p))}function q(a){if(!a)return["",""];var b=a.trim().split(p),c=0;while(c<b.length){if(b[c].startsWith("m="))break;c++}return c===b.length?[a.trim(),""]:[b.slice(0,c).join(p).trim(),b.slice(c).join(p).trim()]}function r(a){return s(a.filter(function(a){return a.startsWith(o)}).map(function(a){return a.substr(o.length)}))}function s(a){__p&&__p();var b=Object.create(null);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e&&(b[e]=!0)}return Object.keys(b).sort()}e.exports=n}),null);
__d("FBRTCMessage",["FBRTCConstants","FBRTCExperiment","FBRTCSdpUtils","FBRTCSupport"],(function(a,b,c,d,e,f){__p&&__p();var g="mobile";function a(a){"use strict";__p&&__p();if(!this.$1(a))throw new Error("invalid webrtc message");this.originalMessageData=a;this.peerID=a.from;this.callID=parseInt(a.call_id,10);this.msg=JSON.parse(a.payload);this.msg.json_payload&&(this.escalationName=this.msg.sessionName,this.msg=this.msg.json_payload);this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=a.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$2();this.$3();this.$4();this.$5()}a.prototype.$1=function(a){"use strict";return a.from&&a.call_id&&a.payload};a.prototype.$2=function(){"use strict";if(this.peerSupportsVideoInterop)return;this.isFromMobile()&&this.disableVideo()};a.prototype.disableVideo=function(){"use strict";this.msg.sdp&&(this.msg.sdp=b("FBRTCSdpUtils").disableVideo(this.msg.sdp)),(this.msgType===b("FBRTCConstants").PayloadType.SET_VIDEO||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ANSWER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER)&&(this.msg.videoon=!1)};a.prototype.$3=function(){"use strict";this.isFromMobile()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE&&(this.msg.sdp=b("FBRTCSdpUtils").removeFEC(this.msg.sdp))};a.prototype.$4=function(){"use strict";if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen("rtc_browser_use_h264");a=a.getParam("allow_h264","no");a!=="yes"&&(this.msg.sdp=b("FBRTCSdpUtils").removeH264(this.msg.sdp))}};a.prototype.$5=function(){"use strict";if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen("rtc_browser_use_vp9");a=a.getParam("allow_vp9","no");a!=="yes"&&(this.msg.sdp=b("FBRTCSdpUtils").removeVP9(this.msg.sdp))}};a.prototype.isOffer=function(){"use strict";return this.msgType===b("FBRTCConstants").PayloadType.OFFER};a.prototype.isFromMobile=function(){"use strict";return this.source===g};a.prototype.isRemoteVideoSupported=function(){"use strict";return!this.msg.sdp||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE?!0:b("FBRTCSdpUtils").isVideoSupported(this.msg.sdp)};a.prototype.isRetry=function(){"use strict";return!!this.msg.flag};a.prototype.isForCall=function(a,c){"use strict";return this.escalationName&&(this.msgType===b("FBRTCConstants").PayloadType.HANGUP||this.msgType===b("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY)?c===this.escalationName:!a||a===this.callID||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE};a.prototype.getSignalingExperiments=function(){"use strict";return this.isFromMobile()&&!this.msg.experiments?["sdp_update"]:this.msg.experiments};e.exports=a}),null);
__d("FBRTCVideoEscalationStore",["FBRTCCallControlActions","FBRTCConstants","FBRTCStore","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=25e3,i=1e4,j=b("keyMirror")({direct_video:null,escalated:null,escalation_declined:null,voip:null});c=babelHelpers.inherits(a,b("FBRTCStore"));g=c&&c.prototype;function a(a,b,c){g.constructor.call(this),this.$FBRTCVideoEscalationStore7=a,this.$FBRTCVideoEscalationStore2=b,this.$FBRTCVideoEscalationStore1=c,this.$FBRTCVideoEscalationStore4=c,this.$FBRTCVideoEscalationStore3=!1,this.$FBRTCVideoEscalationStore5=null,this.$FBRTCVideoEscalationStore8=null}a.prototype.isPending=function(){return!!this.$FBRTCVideoEscalationStore5};a.prototype.callHasEscalated=function(){return this.$FBRTCVideoEscalationStore1};a.prototype.getCallType=function(){if(!this.$FBRTCVideoEscalationStore2.isRemoteVideoSupported)return j.voip;else if(this.$FBRTCVideoEscalationStore4)return j.direct_video;else if(this.$FBRTCVideoEscalationStore1)return j.escalated;else if(this.$FBRTCVideoEscalationStore3)return j.escalation_declined;return j.voip};a.prototype.__onDispatch=function(a){__p&&__p();switch(a.type){case b("FBRTCCallControlActions").Types.RECEIVED_SIGNALING_MESSAGE:var c=a.message;a.message_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&(this.$FBRTCVideoEscalationStore3=!0,c.ackID?this.$FBRTCVideoEscalationStore10(c):this.$FBRTCVideoEscalationStore11(c));a.message_type===b("FBRTCConstants").PayloadType.ACK&&c.msg.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$FBRTCVideoEscalationStore12(c);break;case b("FBRTCCallControlActions").Types.ACCEPT_ESCALATION:this.$FBRTCVideoEscalationStore13(!0);break;case b("FBRTCCallControlActions").Types.DECLINE_ESCALATION:this.$FBRTCVideoEscalationStore13(!1);break;case b("FBRTCCallControlActions").Types.TOGGLE_MUTE_VIDEO:this.$FBRTCVideoEscalationStore3=!0;this.getDispatcher().waitFor([this.$FBRTCVideoEscalationStore2.getDispatchToken()]);this.$FBRTCVideoEscalationStore14();break}};a.prototype.$FBRTCVideoEscalationStore12=function(a){this.$FBRTCVideoEscalationStore8&&this.$FBRTCVideoEscalationStore8.msg_id===a.ackID&&this.$FBRTCVideoEscalationStore15()};a.prototype.$FBRTCVideoEscalationStore15=function(){clearTimeout(this.$FBRTCVideoEscalationStore6)};a.prototype.$FBRTCVideoEscalationStore16=function(){this.$FBRTCVideoEscalationStore6=setTimeout(function(){if(!this.$FBRTCVideoEscalationStore8)return;this.$FBRTCVideoEscalationStore7.resendPayload(this.$FBRTCVideoEscalationStore2.peerID,this.$FBRTCVideoEscalationStore8)}.bind(this),i)};a.prototype.$FBRTCVideoEscalationStore10=function(a){__p&&__p();if(!this.$FBRTCVideoEscalationStore8||a.ackID!==this.$FBRTCVideoEscalationStore8.msg_id)return;clearTimeout(this.$FBRTCVideoEscalationStore9);this.$FBRTCVideoEscalationStore15();var b=a.msg,c=a.peerID;a=a.callID;var d=this.$FBRTCVideoEscalationStore17(b);this.$FBRTCVideoEscalationStore7.sendAck(c,a,b);this.$FBRTCVideoEscalationStore8=null;this.$FBRTCVideoEscalationStore1=d;this.$FBRTCVideoEscalationStore18(d);!d&&this.$FBRTCVideoEscalationStore2.localStream.hasVideo()&&this.$FBRTCVideoEscalationStore2.localStream.toggleMuteVideo();this.__emitChange()};a.prototype.$FBRTCVideoEscalationStore11=function(a){if(this.$FBRTCVideoEscalationStore1){this.$FBRTCVideoEscalationStore17(a.msg)?(this.$FBRTCVideoEscalationStore5=a,this.$FBRTCVideoEscalationStore13(!0)):this.$FBRTCVideoEscalationStore2.remoteStream.setVideoEnabled(!1);return}var c=a.msg,d=a.peerID,e=a.callID;this.$FBRTCVideoEscalationStore7.sendAck(d,e,c);this.$FBRTCVideoEscalationStore17(c)?(this.$FBRTCVideoEscalationStore5=a,this.$FBRTCVideoEscalationStore9=setTimeout(function(){b("FBRTCCallControlActions").declineEscalation()},h)):this.$FBRTCVideoEscalationStore5=null;this.__emitChange()};a.prototype.$FBRTCVideoEscalationStore13=function(a){__p&&__p();clearTimeout(this.$FBRTCVideoEscalationStore9);if(this.$FBRTCVideoEscalationStore5){var b=this.$FBRTCVideoEscalationStore5,c=b.peerID,d=b.callID;b=b.msgID;this.$FBRTCVideoEscalationStore8=this.$FBRTCVideoEscalationStore7.sendVideoRequestResponse(c,d,b,a);this.$FBRTCVideoEscalationStore16();this.$FBRTCVideoEscalationStore1=a;this.$FBRTCVideoEscalationStore5=null;this.__emitChange()}};a.prototype.$FBRTCVideoEscalationStore14=function(){if(this.$FBRTCVideoEscalationStore1){this.$FBRTCVideoEscalationStore19();return}this.$FBRTCVideoEscalationStore8=this.$FBRTCVideoEscalationStore7.sendVideoEscalationRequest(this.$FBRTCVideoEscalationStore2.peerID,this.$FBRTCVideoEscalationStore2.callID,this.$FBRTCVideoEscalationStore2.localStream.hasVideo());this.$FBRTCVideoEscalationStore2.localStream.hasVideo()?(this.$FBRTCVideoEscalationStore16(),this.$FBRTCVideoEscalationStore9=setTimeout(function(){this.$FBRTCVideoEscalationStore2.localStream.hasVideo()&&b("FBRTCCallControlActions").toggleMuteVideo()}.bind(this),h)):(this.$FBRTCVideoEscalationStore15(),clearTimeout(this.$FBRTCVideoEscalationStore9),this.$FBRTCVideoEscalationStore8=null);this.__emitChange()};a.prototype.$FBRTCVideoEscalationStore19=function(){if(!this.$FBRTCVideoEscalationStore2.isRemoteVideoSupported)return;this.$FBRTCVideoEscalationStore7.sendMuteStateUpdate(this.$FBRTCVideoEscalationStore2.peerID,this.$FBRTCVideoEscalationStore2.callID,this.$FBRTCVideoEscalationStore2.localStream.hasVideo())};a.prototype.$FBRTCVideoEscalationStore18=function(a){this.$FBRTCVideoEscalationStore2.remoteStream.setVideoEnabled(a)};a.prototype.$FBRTCVideoEscalationStore17=function(a){return!!(a.reqVideoOn||a.videoon)};a.CallType=j;e.exports=a}),null);
__d("RTCP2PCallEscalationStoreState",["FBRTCMessage","FBRTCVideoEscalationStore","immutable"],(function(a,b,c,d,e,f){var g;c=b("FBRTCVideoEscalationStore").CallType;g=babelHelpers.inherits(a,b("immutable").Record({awaitingACK:!1,callType:c.voip,escalated:!1,failureReason:null,initiatedEscalation:!1,inProgress:!1,request:null,response:null,token:null}));g&&g.prototype;function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerRTCFunnelLogger",["FunnelLogger","FBRTCConstants","RTCCallActionTypes","FBRTCCallControlActions","RTCP2PCallActionTypes","RTCP2PCallEscalationActionTypes","RTCP2PCallEscalationStoreState","URI","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol,h=b("FBRTCCallControlActions").Types,i="WEB_MESSENGER_RTC_FUNNEL",j=i+"_append",k=i+"_tags",l=i+"_end",m=null;function a(a){b("FunnelLogger").startFunnel(i),o([a]),n()}function n(){var a={bn:b("UserAgentData").browserName,bv:b("UserAgentData").browserVersion,os:b("UserAgentData").platformName,dn:b("URI").getRequestURI().getDomain().split(".").slice(-2).join(".")};Object.keys(a).forEach(function(c){b("FunnelLogger").addFunnelTag(i,c+":"+(a[c]||"unknown"))})}function o(a){if(window.opener&&window.opener.postMessage&&m){window.opener.postMessage({type:k,nonce:m,tags:a},window.location.origin);return}a.forEach(function(a){b("FunnelLogger").addFunnelTag(i,a)})}function p(a,c){if(window.opener&&window.opener.postMessage&&m){window.opener.postMessage({type:i+"_append",nonce:m,action:a,actionTag:c},window.location.origin);return}c===undefined?b("FunnelLogger").appendActionIfNew(i,a):b("FunnelLogger").appendActionWithTag(i,a,c)}function q(a){if(window.opener&&window.opener.postMessage&&m){window.opener.postMessage({type:i+"_end",nonce:m,action:a},window.location.origin);return}a&&p(a);b("FunnelLogger").endFunnel(i)}function c(a){m=a}function d(a){var b=function b(event){if(event.origin!==window.location.origin||!event.data||event.data.nonce!==a)return;event.data.type===j?p(event.data.action,event.data.actionTag):event.data.type===k?o(event.data.tags):event.data.type===l&&(q(event.data.action),window.removeEventListener("message",b))};window.addEventListener("message",b)}function f(a,b){switch(a){case h.RECEIVED_SIGNALING_MESSAGE:break;case"END_CALL":p(a,b);q();break;default:p(a,b)}}function r(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_CONFERENCE_STATE:case b("RTCCallActionTypes").SET_CALL_SUMMARY:case b("RTCCallActionTypes").SET_DOMINANT_SPEAKER:case b("RTCCallActionTypes").ON_SERVER_MEDIA_UPDATE_SUCCESS:case b("RTCCallActionTypes").SET_GRID_VIEW:case b("RTCCallActionTypes").SET_STRIP_VIEW:case b("RTCP2PCallActionTypes").SET_REMOTE_SIGNALING_EXPERIMENTS:case b("RTCP2PCallActionTypes").SET_CALL_TYPE:case b("RTCP2PCallActionTypes").P2P_INIT_NUX_STATE:break;case b("RTCP2PCallActionTypes").P2P_PROCESS_MESSAGE:var d=[];c.message&&!c.message.isRemoteVideoSupported()&&d.push("remove_video_unsupported");c.message&&c.message.isFromMobile()?d.push("peer_on_mobile"):d.push("peer_on_web");o(d);break;case b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:p(c.connectionStatus);break;case b("RTCCallActionTypes").SET_END_CALL_REASON:p(c.type,c.endCallReason&&c.endCallReason.toStrName(!0));setTimeout(q,1e3);break;case b("RTCCallActionTypes").INIT:c.protocol===g.P2P&&o(["p2p","v2"]);break;case b("RTCCallActionTypes").SET_LAYOUT:p(c.type,c.layout);break;case b("RTCCallActionTypes").SET_MW_CALL_TYPE:p(c.type,c.callType);break;case b("RTCCallActionTypes").END_CALL:p(c.type,c.endCallReason);break;default:p(c.type)}return a}function s(a,c){switch(c.type){case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_START:case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS:case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE:p(c.type,"caller");break;case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_REQUEST:case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE:case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK:p(c.type,"callee");break;default:return a}return a}a={appendAction:p,addFunnelTags:o,endFunnel:q,startFunnel:a,setWindowNonce:c,listenCrossWindowAction:d,logRTCCallAction:r,logRTCP2PV1Action:f,logRTCCallEscalationAction:s};e.exports=a}),null);
__d("FBRTCAvailability",["ChannelConstants","PresenceStatus"],(function(a,b,c,d,e,f){"use strict";a={isCallable:function(a){a=b("PresenceStatus").getCapabilities(a);var c=b("ChannelConstants").CAPABILITY_VOIP_INTEROP;return!!(a&c)}};e.exports=a}),null);
__d("FBRTCCallUIWrapper",["regeneratorRuntime","Bootloader","MessengerRTCFunnelLogger","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a={openGroupCallUI:function(a,c,d,e,f,h){return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallUI(a,c,d,e,f,g,h)},"FBRTCCallUIWrapper");case 2:case"end":return i.stop()}},null,this)},openGroupCallURI:function(a,c,d,e,f,h){return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallURI({conferenceName:a,callID:c,hasVideo:d,serverInfoData:e,trigger:f,callSummary:h,callWindow:g})},"FBRTCCallUIWrapper");case 2:case"end":return i.stop()}},null,this)},openAsCaller:function(a,c,d,e){!g&&window.rtcCallChildWindow&&(g=window.rtcCallChildWindow,window.rtcCallChildWindow=null);if(this._shouldFocusCallWindow(a)){g&&g.focus();return}this._shouldCloseCallWindow()&&(g&&g.close());g=this._openWindow("Video Call");b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCaller(a,c,d,e,g)},"FBRTCCallUIWrapper")},openAsCallee:function(a,c,d,e,f){g=this._openWindow("Video Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCallee(a,c,d,e,f,g)},"FBRTCCallUIWrapper")},_shouldFocusCallWindow:function(a){return!!g&&!g.closed&&g.rtcCallInProgessWith===a},_shouldCloseCallWindow:function(){return!!g&&!g.closed&&!g.rtcCallInProgessWith},_openWindow:function(a){var c=this._windowPosition();c=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",");this._isSparkBrowser()&&(c="");a=window.open("",a,c);window.callWindow=a;a?b("MessengerRTCFunnelLogger").appendAction("popup_window"):b("MessengerRTCFunnelLogger").endFunnel("popup_blocked");return a},_windowPosition:function(){__p&&__p();var a=960,b=540,c=void 0,d;void 0;var e;void 0;var f=void 0;screen&&screen.width>1280&&(a=1280,b=720);window.innerWidth!==undefined?(d=window.innerWidth,c=window.innerHeight):(d=screen.width,c=screen.height);window.screenLeft!==undefined?(e=window.screenLeft,f=window.screenTop):(e=window.screenX,f=window.screenY);d=Math.floor(d/2-a/2+e);e=Math.floor(c/2-b/2+f);return{height:"height="+b.toString(),width:"width="+a.toString(),top:"top="+e.toString(),left:"left="+d.toString()}},_isSparkBrowser:function(){return b("UserAgent").isBrowser("Chrome < 34")&&b("UserAgent").isBrowser("Chrome > 33")}};e.exports=a}),null);
__d("FBRTCCore",["invariant","Bootloader","FBRTCAvailability","FBRTCCallUIWrapper","FBRTCSupport","FBRTCUtils","MessengerRTCFunnelLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1;a={startOutgoingCall:function(a,c,d){__p&&__p();var e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3];/\D/.test(a)&&g(0);if(h)return;b("MessengerRTCFunnelLogger").addFunnelTags([d?"audio_only":"video","p2p"]);h=!0;setTimeout(function(){h=!1},1e3);if(e&&!b("FBRTCSupport").isCollabSupported())b("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage","CollabMessengerLogger"],function(c,d){c.showForUnsupportedCollabCall(),d.logBrowserNotSupported({peerID:a}),b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");else if(!b("FBRTCSupport").isWebrtcSupported())b("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage"],function(a){a.showForOutgoingCall(),b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");else{var f=b("FBRTCUtils").generateRandomInt();b("FBRTCCallUIWrapper").openAsCaller(a,f,c,d)}},startGroupCall:function(a){__p&&__p();var c=a.conferenceName,d=a.hasVideo,e=a.serverInfoData,f=a.trigger;a=a.usersToRing;a=a===undefined?[]:a;if(h)return;b("MessengerRTCFunnelLogger").addFunnelTags([d?"video":"audio_only","group"]);h=!0;setTimeout(function(){h=!1},1e3);if(!b("FBRTCSupport").isGroupCallWebtrcSupported()){b("Bootloader").loadModules(["MessengerRTCUnsupportedBrowserDialogController"],function(a){a.render({hasVideo:d,isGroupCall:!0}),b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");return}b("FBRTCCallUIWrapper").openGroupCallUI(c,b("FBRTCUtils").generateRandomInt(),a,d,f,e)},isAvailableForWebrtcCalling:function(a){return b("FBRTCAvailability").isCallable(a)},shouldEnableVideoCalling:function(){return b("FBRTCSupport").isOSSupported()}};e.exports=a}),null);
__d("FBRTCCallabilityActions",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function a(a){this.$1=a}a.prototype.callabilityFetched=function(a,b){this.$1.dispatch({type:g.CALLABILITY_FETCHED,userID:a,callability:b})};a.prototype.callabilityFetchError=function(a){this.$1.dispatch({type:g.CALLABILITY_FETCH_ERROR,userID:a})};a.Types=g;e.exports=a}),null);
__d("XRTCCallabilityController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:!0}})}),null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","TimeSlice","XRTCCallabilityController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=new(b("FBRTCCallabilityActions"))(a)}a.prototype.fetchCallability=function(a){b("TimeSlice").guard(function(){var c=b("XRTCCallabilityController").getURIBuilder().setFBID("user_id",a).getURI(),d=this.$2.bind(this,a),e=this.$3.bind(this,a);new(b("AsyncRequest"))().setURI(c).setHandler(d).setErrorHandler(e).setAllowCrossPageTransition(!0).send()}.bind(this),"Chat Tab RTC Callability Check",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.$2=function(a,b){this.$1.callabilityFetched(a,b.payload)};a.prototype.$3=function(a,b){this.$1.callabilityFetchError(a)};e.exports=a}),null);
__d("RTWebLoggingCallType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P:"p2p",MW:"mw",ESCALATED:"escalated"})}),null);
__d("RTWebLoggingComponent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_CALL:"audio_button",VIDEO_CALL:"video_button",START_CALL:"start_call_button",END_CALL:"end_call_button",CANCEL:"cancel_button",CALL_BACK:"call_back",CALL_AGAIN:"call_again",REDIAL:"redial",SCREENSHARING:"screensharing",TOGGLE_VIDEO:"toggle_video",TOGGLE_AUDIO:"toggle_audio",ADD_PARTICIPANT:"add_participant",VIDEO_FILTER:"video_filter",FULLSCREEN:"fullscreen",CLOSE_WINDOW:"close_window",ACCEPT:"accept_button",DECLINE:"decline_button",NOT_NOW:"rating_not_now"})}),null);
__d("RTWebLoggingEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TAP:"tap",IMPRESSION:"impression",ERROR:"error"})}),null);
__d("RTWebLoggingMediaType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO:"video",AUDIO:"audio",ESCALATED:"escalated"})}),null);
__d("RTWebLoggingPage",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FACEBOOK:"facebook",FB_MESSENGER:"fb_messenger",POPUP_WINDOW:"popup_window",P2P_CALL:"p2p_call"})}),null);
__d("RTWebUserActionLogger",["FBRTCConsoleLogger","RTCWebUserActionsTypedLogger","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingEvent","RTWebLoggingMediaType","RTWebLoggingPage"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.logImpression=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").IMPRESSION},a))};a.prototype.logClick=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").TAP},a))};a.prototype.logError=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").ERROR},a))};a.prototype.logEvent=function(event){var a=new(b("RTCWebUserActionsTypedLogger"))().setCallType(event.callType).setClientTime(Date.now()).setErrorDomain(event.errorDomain).setErrorType(event.errorType).setComponent(event.component).setConferenceState(event.conferenceState).setEvent(event.eventName).setMediaType(event.mediaType).setPage(event.page).setSurface(event.surface),c=a.getData();a.log()};a.prototype.getCallType=function(a){var c=arguments.length<=1||arguments[1]===undefined?!1:arguments[1];if(a===null)return null;if(a)return b("RTWebLoggingCallType").MW;else if(c)return b("RTWebLoggingCallType").ESCALATED;else return b("RTWebLoggingCallType").P2P};a.prototype.getAudioVideoComponent=function(a){return a===null?null:a?b("RTWebLoggingComponent").AUDIO_CALL:b("RTWebLoggingComponent").VIDEO_CALL};a.prototype.getMediaType=function(a){var c=arguments.length<=1||arguments[1]===undefined?!1:arguments[1];if(c)return b("RTWebLoggingMediaType").ESCALATED;else if(a)return b("RTWebLoggingMediaType").AUDIO;else return b("RTWebLoggingMediaType").VIDEO};a.prototype.getPage=function(){var a=window.location.hostname;if(a.search("facebook")!==-1)return b("RTWebLoggingPage").FACEBOOK;else if(a.search("messenger")!==-1)return b("RTWebLoggingPage").MESSENGER_DOT_COM;return null};function a(){}e.exports=new a()}),null);
__d("RTCCallabilityStore",["fbt","Cache","FBRTCCallabilityActions","FBRTCCallabilityDataManager","FluxStore","MercuryThreadInfo","RTCConfig"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=.5,j=5;c=babelHelpers.inherits(a,b("FluxStore"));h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$RTCCallabilityStore2=new(b("FBRTCCallabilityDataManager"))(a),this.$RTCCallabilityStore1=new(b("Cache"))()}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type;switch(c){case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCHED:c=a.userID;var d=a.callability;this.$RTCCallabilityStore1.set(c,{callable:d.is_callable,isBlocked:d.is_blocked},null,d.is_callable?j:i);this.__emitChange();break;case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(a.userID,{callable:!1,isBlocked:!1},null,i);this.__emitChange();break}};a.prototype.isCallable=function(a,b){b=b?b.message_count>0&&b.folder==="inbox":!1;a=this.fetchUserFromCache(a);return a&&a.callable||b};a.prototype.isBlocked=function(a,c){c=c?b("MercuryThreadInfo").canReply(c):!0;a=this.fetchUserFromCache(a);return a&&a.isBlocked||!c};a.prototype.fetchUserFromCache=function(a){this.$RTCCallabilityStore1.has(a)||(this.$RTCCallabilityStore2.fetchCallability(a),this.$RTCCallabilityStore1.set(a,{callable:!1,isBlocked:!1},null,i));return this.$RTCCallabilityStore1.get(a)};a.prototype.callButtonTooltip=function(a,b){var c=arguments.length<=2||arguments[2]===undefined?!0:arguments[2],d=arguments[3];return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a video chat with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for video calling",[g._param("shortname",b)])};a.prototype.voiceCallButtonTooltip=function(a,b){var c=arguments.length<=2||arguments[2]===undefined?!0:arguments[2],d=arguments[3];return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a voice call with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for voice calling",[g._param("shortname",b)])};a.__moduleID=e.id;e.exports=a}),null);
__d("FBRTCCallabilityStore",["FBRTCDispatcher","RTCCallabilityStore"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("RTCCallabilityStore"))(b("FBRTCDispatcher"))}),null);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;void 0;var h={};c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),b("P2PDispatcher").register(this.onEventDispatched.bind(this)),h={dialogClass:null,dialogProps:null}}a.prototype.getState=function(){return h};a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.type;a=a.data;switch(c){case b("P2PActionConstants").DIALOG_SHOWN:h.dialogClass=a.dialogClass;h.dialogProps=a.dialogProps;this.emit("change");break;case b("P2PActionConstants").DIALOG_CLOSED:h.dialogClass=null;h.dialogProps=null;this.emit("change");break}};e.exports=new a()}),null);
__d("P2PDialogContainer.react",["P2PDialogStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state=b("P2PDialogStore").getState(),this.onDialogStoreChange=function(){this.setState(b("P2PDialogStore").getState())}.bind(this),c}a.prototype.componentDidMount=function(){this.dialogStoreSub=b("P2PDialogStore").addListener("change",this.onDialogStoreChange)};a.prototype.componentWillUnmount=function(){this.dialogStoreSub&&(this.dialogStoreSub.remove(),this.dialogStoreSub=null)};a.prototype.render=function(){if(!this.state.dialogClass)return null;var a=this.state.dialogClass;return b("React").createElement(a,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};e.exports=a}),null);
__d("PagesPlatformActionConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BOOKING_REQUEST_ACCEPT_ERROR:"booking_request_accept_error",BOOKING_REQUEST_ACCEPT_INITIATED:"booking_request_accept_initiated",BOOKING_REQUEST_ACCEPTED:"booking_request_accepted",BOOKING_REQUEST_CREATED:"booking_request_created",BOOKING_REQUEST_DECLINE_ERROR:"booking_request_decline_error",BOOKING_REQUEST_DECLINE_INITIATED:"booking_request_decline_initiated",BOOKING_REQUEST_DECLINED:"booking_request_declined",BOOKING_REQUEST_RESCHEDULE_INITIATED:"booking_request_reschedule_initiated",BOOKING_REQUEST_RESCHEULED:"booking_request_reschedule",DIALOG_CLOSED:"dialog_closed",DIALOG_SHOWN:"dialog_shown",NEW_TIME_CHOSEN:"new_time_chosen"});e.exports=a}),null);
__d("PagesPlatformRequestDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("PagesPlatformDialogStore",["EventEmitter","PagesPlatformActionConstants","PagesPlatformRequestDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={};c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),b("PagesPlatformRequestDispatcher").register(this.onEventDispatched.bind(this)),h={dialogClass:null,dialogProps:null}}a.prototype.getState=function(){return h};a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.type;a=a.data;switch(c){case b("PagesPlatformActionConstants").DIALOG_SHOWN:h.dialogClass=a.dialogClass;h.dialogProps=a.dialogProps;this.emit("change");break;case b("PagesPlatformActionConstants").DIALOG_CLOSED:h.dialogClass=null;h.dialogProps=null;this.emit("change");break}};e.exports=new a()}),null);
__d("PagesPlatformDialogContainer.react",["PagesPlatformDialogStore","PureStoreBasedStateMixin","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"PagesPlatformDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("PagesPlatformDialogStore"))],statics:{calculateState:function(){return b("PagesPlatformDialogStore").getState()}},render:function(){if(!this.state.dialogClass)return null;var a=this.state.dialogClass;return b("React").createElement(a,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))}});e.exports=a}),null);
__d("FBPaymentsDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!1})}),null);
__d("FBPaymentsDialogActions",["FBPaymentsDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g={types:b("keyMirror")({SHOW_DIALOG:null,HIDE_DIALOG:null}),showDialog:function(a,c){b("FBPaymentsDispatcher").dispatch({type:g.types.SHOW_DIALOG,data:{dialogClass:a,dialogProps:c}})},hideDialog:function(){b("FBPaymentsDispatcher").dispatch({type:g.types.HIDE_DIALOG,data:{}})}};e.exports=g}),null);
__d("FBPaymentsDialogStore",["FBPaymentsDialogActions","FBPaymentsDispatcher","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("FBPaymentsDispatcher")),this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null}}a.prototype.__onDispatch=function(a){var c=a.type;a=a.data;switch(c){case b("FBPaymentsDialogActions").types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:a.dialogClass,dialogProps:a.dialogProps};this.__emitChange();break;case b("FBPaymentsDialogActions").types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break}};a.prototype.getState=function(){return this.$FBPaymentsDialogStore1};a.__moduleID=e.id;e.exports=new a()}),null);
__d("FBPaymentsDialogContainer.react",["FBPaymentsDialogStore","FBPaymentsDispatcher","FluxContainer","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.calculateState=function(){return b("FBPaymentsDialogStore").getState()};a.getStores=function(){return[b("FBPaymentsDialogStore")]};a.prototype.UNSAFE_componentWillMount=function(){b("FBPaymentsDispatcher").explicitlyRegisterStore(b("FBPaymentsDialogStore"))};a.prototype.render=function(){if(!this.state.dialogClass)return null;var a=this.state.dialogClass;return b("React").createElement(a,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("RTCCallState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NO_ONGOING_CALL:"NO_ONGOING_CALL",AUDIO_GROUP_CALL:"AUDIO_GROUP_CALL",VIDEO_GROUP_CALL:"VIDEO_GROUP_CALL"})}),null);
__d("RTWebLoggingSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_CONTROLS:"call_controls",CHAT_TAB:"chat_tab",MESSENGER_HEADER:"messenger_header",INCOMING_DIALOG:"incoming_call_dialog",CALL_HEADER:"call_header",GROUP_CALL_PARTICIPANT_PICKER_DIALOG:"GROUP_CALL_PARTICIPANT_PICKER_DIALOG",P2P_CALL_CONTAINER:"p2p_call_container"})}),null);